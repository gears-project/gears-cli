use shell::{Command};

pub expression -> Command
  = set
  / help
  / sync
  / structure
  / other
  / nop

nop -> Command
  = newline { Command::Nop }
  / "" { Command::Nop }

set -> Command
  = "set" _ key:label _ val:label _ newline* {
    Command::Set(key, val)
  }

help -> Command
 = "help" _ newline* {
   Command::Help
 }

structure -> Command
 = "structure" _ newline*{
   Command::Structure
 }

sync -> Command
 = "sync" _ newline* {
   Command::Sync
 }

other -> Command
  = s:$(.*) {
    Command::Other(s.to_string())
  }

label -> String
  = label:$([A-Za-z0-9\_]+) {
    label.to_string()
  }

_ -> ()
  = space*

space -> ()
  = " "

newline -> ()
  = "\n"
  / "\r"
  / "\r\n"

